**99. 恢复二叉搜索树**

> 二叉搜索树中的两个节点被错误地交换。
>
> 请在不改变其结构的情况下，恢复这棵树。
>
> ```
> 示例 1:
> 
> 输入: [1,3,null,null,2]
> 
>    1
>   /
>  3
>   \
>    2
> 
> 输出: [3,1,null,null,2]
> 
>    3
>   /
>  1
>   \
>    2
> ```
>
> 
>
> ```
> 示例 2:
> 
> 输入: [3,1,4,null,null,2]
> 
>   3
>  / \
> 1   4
>    /
>   2
> 
> 输出: [2,1,4,null,null,3]
> 
>   2
>  / \
> 1   4
>    /
>   3
> ```



**解题思路**

首先明确什么是二叉搜索树：左子树的值全部小于root，右子树当值全部大于root，且**不存在**相同值。因为只有大于或小于的关系，所以每一个值都是唯一的。

对搜索二叉树进行**中序**遍历即可构造出一个**升序排列数组**，如示例2中恢复的二叉搜索树经过中序遍历得到当序列为：`1234`。若二叉搜索树的节点被交换，则会出现前面位置当数值大于后面的情况，我们只需要遍历数组找到这种情况就可以了。

题目中有两个节点被错误的交换，被交换的位置可分为两种情况：

- 在数组中两节点相邻（示例1）
- 在数组中两节点不相邻（示例2）

第一种情况，示例2构成的数组：`1324`，只需交换`3`与`2`即可恢复。

第二种情况，示例1构成的数组：`321`，我们在遍历数组判断前者大于后者时，检测到了两处这类情况，通过观察可以发现：第一处只需保留**下标靠前**的位置，第二处只需保留**下标靠后**的位置，然后进行交换即可。



整体上的思路可以归纳为：

- 中序遍历二叉搜索树构造升序数组
- 遍历数组找出被交换的两个节点并记录
- 交换两个节点的值



###### 优化

由于我们只关注中序遍历时后者节点与前者节点的大小关系，可以不必构造升序数组，直接在中序遍历时判断即可。

